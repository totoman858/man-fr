Content-type: text/html

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of CP</TITLE>
</HEAD><BODY>
<H1>CP</H1>
Section: Manuel de l'utilisateur Linux (1)<BR>Updated: 25 juillet 2003<BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NOM</H2>

cp - Copier des fichiers.
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>cp [</B><I>options</I><B>] </B><I>fichier chemin</I>

<BR>

<B>cp [</B><I>options</I><B>] </B><I>fichier... répertoire</I>

<P>
Options POSIX :
<B>[-fipRr] [--]</B>

<P>
Options GNU (forme courte) :
<B>[-abdfilprsuvxPR]</B>

<B>[-S </B><I>SUFFIXE</I><B>]</B>

<B>[-V {numbered,existing,simple}]</B>

<B>[--backup=</B><I>CONTROL</I><B>]</B>

<B>[--sparse=</B><I>WHEN</I><B>]</B>

<B>[--help] [--version] [--]</B>

<P>
<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<B>cp</B>

sert à copier des fichiers (et éventuellement des répertoires).
On peut aussi bien copier un fichier donné vers une destination précise
que copier un ensemble de fichiers dans un répertoire.
<P>
Si le dernier argument correspond à un nom de répertoire,
<B>cp</B>

copie dans ce répertoire chaque fichier indiqué en conservant le même nom.
<P>
Sinon, s'il n'y a que deux fichiers indiqués, il copie le premier sur
le second. 
<P>
Une erreur se produit si le dernier argument n'est pas un répertoire,
et si plus de deux fichiers sont indiqués. Par défaut, on n'effectue pas la
copie de répertoires.
<P>

Ainsi, si /a est un répertoire, alors `cp -r /a /b' copiera /a dans /b/a et
/a/x dans /b/a/x au cas
où /b existe déjà, mais il copiera /a sur /b et /a/x dans /b/x si /b
n'existait pas encore. Enfin si /b était un fichier ordinaire la copie
échouera.
<P>

Les autorisations d'accès des fichiers et des répertoires créés seront
les mêmes que celles des fichiers d'origine masquées avec un ET binaire
avec 0777, et modifiées par le umask de l'utilisateur (sauf si l'on invoque
l'option -p).
<P>
Pendant la copie récursive de répertoires, les nouveaux répertoires verront
leur masque temporairement étendu par un OU binaire avec S_IRWXU (0700), afin
d'autoriser le processus d'y lire, écrire et vérifier le contenu.
<P>

<B>cp</B>

ne fait rien lorsque l'on tente de copier un fichier sur lui-même (sauf
éventuellement afficher un message d'erreur).
<P>
Lorsque la copie se fait sur un fichier existant, celui-ci est ouvert
en utilisant `open(chemin, O_WRONLY | O_TRUNC)'.
Lorsque la copie a lieu dans un nouveau fichier, 
on invoque `open(chemin, O_WRONLY | O_CREAT, mode)'.
Si l'ouverture d'un fichier existant échoue, et si l'option -f a été
invoquée, 
<B>cp</B>

essaye de supprimer, avec
<B><A HREF="/cgi-bin/man/man2html?2+unlink">unlink</A></B>(2),

le fichier existant, puis de recréer un nouveau fichier.
<P>
<A NAME="lbAE">&nbsp;</A>
<H2>OPTIONS POSIX</H2>

Posix défini quatre options et demi :
<DL COMPACT>
<DT><B>-f</B>

<DD>
Effacer les fichiers cibles existants (voir ci-dessus).
<DT><B>-i</B>

<DD>
Interroger l'utilisateur avant d'écraser des fichiers réguliers existants.
La question est affichée sur stderr, et la réponse lue depuis stdin.
<DT><B>-p</B>

<DD>
Conserver le propriétaire, le groupe, les permissions d'accès et les
horodatages du fichier original. Si la conservation du propriétaire ou
du groupe est impossible, les bits Set-UID et Set-GID sont effacés.
L'horodatage sera quand même légèrement différent entre l'original et
la copie car l'opération de copie nécessite un accès en lecture
au fichier source.
<DT><B>-R</B>

<DD>
Copier récursivement les répertoires, et gérer correctement les copies
des fichiers spéciaux ou des FIFOs.
<DT><B>-r</B>

<DD>
Copier récursivement les répertoires mais la gestion des fichiers spéciaux
n'est pas définie. En fait l'option -r est autorisée, et même encouragée
à se comporter comme l'option -R, toutefois le comportement (stupide) de
la version GNU n'est pas interdit.
<DT><B>--</B>

<DD>
Indique la fin explicite de la liste des options.
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>Spécificité GNU</H2>

En général les fichiers sont écrits immédiatement après lecture de l'original,
sauf si l'on utilise l'option
<B>--sparse</B>

décrite plus bas.
<P>
Par défaut,
<B>cp</B>

ne copie pas les répertoires (voir l'option&nbsp;<B>-r</B>).
<P>
<B>cp</B>

refuse généralement de copier un fichier sur lui-même, avec l'exception
suivante :
si les options
<B>--force</B> et <B>--backup</B>

sont indiquées, et si les fichiers
<I>origine</I> et <I>copie</I>

sont identiques et se rapportent à un fichier régulier,
<B>cp</B>

effectuera une copie de sauvegarde (voir plus bas).
Ceci peut servir à faire une sauvegarde d'un fichier avant de le modifier.
<P>
<A NAME="lbAG">&nbsp;</A>
<H2>OPTIONS GNU</H2>

<DL COMPACT>
<DT><B>-a, --archive</B>

<DD>
Préserver autant que possible la structure et les attributs du fichier
original lors de la copie. Cette option est équivalente à
<I>-dpR</I>.

<DT><B>-b, --backup</B>

<DD>
Effectuer une copie de sauvegarde des fichiers écrasés ou supprimés.
<DT><B>-d, --no-dereference</B>

<DD>
Copier les liens symboliques en tant que tels plutôt que de copier les
fichiers vers lesquels ils pointent. Préserver également les liens matériels
entre les fichiers sources durant la copie.
<DT><B>-f, --force</B>

<DD>
Effacer les fichiers cibles existants.
<DT><B>-i, --interactive</B>

<DD>
Interroger l'utilisateur avant d'écraser des fichiers réguliers existants.
<DT><B>-l, --link</B>

<DD>
Effectuer des liens matériels plutôt que des copies des fichiers réguliers.
<DT><B>-P, --parents</B>

<DD>
Construire le nom de chaque fichier destination en ajoutant au répertoire
cible un slash et le nom du fichier source indiqué. Le dernier argument
de
<B>cp</B>

doit être un répertoire existant. Par exemple, la commande
`cp --parents a/b/c rép_existant' copie le fichier
<I>a/b/c</I>

en
<I>rép_existant/a/b/c,</I>

tout en créant les sous-répertoires intermédiaires manquants.
<DT><B>-p, --preserve</B>

<DD>
Conserver le propriétaire, le groupe, les permissions d'accès et les
horodatages du fichier original.
<DT><B>-r</B>

<DD>
Copier récursivement les répertoires, les sous-répertoires, 
et les fichiers réguliers qu'ils contiennent. Les fichiers spéciaux
et les FIFOs sont considérés comme des fichiers normaux, desquels on
essayera de lire des données pour les écrire dans le fichier destination.
Ainsi `cp' risque de bloquer indéfiniment durant la lecture d'une FIFO
ou d'un fichier spécial /dev/tty. Il faut considérer ceci comme un bug.
Cela signifie qu'il faut éviter l'option -r, et la remplacer par -R.
N'oublions pas que l'ouverture d'un fichier spécial inconnu, par exemple
un scanner peut avoir des effets indésirables sur le matériel.
<DT><B>-R</B>

<DD>
Copier récursivement les répertoires, les sous-répertoires, 
en préservant tous les types de fichiers rencontrés (voir option
-r ci-dessus).
<DT><B>--sparse=</B><I>QUAND</I>

<DD>
[NDT : sparse = clairsemé] Un fichier à trous (sparse file) contient des
séquences d'octets nuls n'occupant pas de place sur le disque. L'appel
système `read' lit ces données comme des zéros. Non seulement cela permet
d'économiser de la place sur le disque, mais on gagne également de la
vitesse de lecture. De nombreux fichiers binaires (exécutables par exemple)
contiennent des séquences importantes de zéros. Par défaut,
<B>cp</B>

détecte les trous dans les fichiers en utilisant une heuristique grossière et
restituera les trous dans les fichiers de sortie.
<DL COMPACT><DT><DD>
<P>

L'argument <I>QUAND</I> peut prendre l'une des valeurs suivantes :
<DL COMPACT>
<DT><B>auto</B>

<DD>
Le comportement par défaut, le fichier de sortie est troué si des trous sont
détectés dans le fichier d'entrée.
<DT><B>always</B>

<DD>
Toujours trouer les fichiers de sortie. Cette option sert lorsque les
fichiers d'entrée se trouvent sur un système de fichiers n'acceptant
pas les trous, et que les fichiers de sortie se trouveront sur
un système les acceptant.
<DT><B>never</B>

<DD>
Ne jamais essayer de faire de trous dans les fichiers de sortie. Si vous
trouvez une utilité à cette option, faites-le nous savoir...
</DL>
</DL>

<DT><B>-s, --symbolic-link</B>

<DD>
Créer des liens symboliques plutôt que des copies des fichiers réguliers.
Tous les noms de fichiers sources doivent être absolus (commençant par '/')
à moins que les fichiers destinations résident dans le répertoire en cours.
Cette option affiche un message d'erreur pour les systèmes de fichiers ne
supportant pas les liens symboliques.
<DT><B>-u, --update</B>

<DD>
Ne pas effectuer la copie si le fichier destination 
existant (autre qu'un répertoire) a une date de modification égale ou
plus récente que celle du fichier source.
<DT><B>-v, --verbose</B>

<DD>
Afficher le nom de chaque fichier avant de le copier. 
<DT><B>-x, --one-file-system</B>

<DD>
Ignorer les sous-répertoires se trouvant sur un système de fichiers
différent de celui du départ de la copie.
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>OPTIONS DE SAUVEGARDE GNU</H2>

Les versions GNU des programmes comme
<B>cp</B>,

<B>mv</B>,

<B>ln</B>,

<B>install</B>

et
<B>patch</B>

créeront au besoin une copie de sauvegarde des fichiers à écraser,
à modifier ou à détruire.
On demande une copie de sauvegarde à l'aide de l'option -b,
on indique la nomenclature à adopter avec l'option -V, et si
la sauvegarde se fait avec un suffixe, celui-ci est précisé avec l'option -S.
<DL COMPACT>
<DT><B>-b, --backup</B>

<DD>
Créer une copie de sauvegarde des fichiers à écraser ou à détruire.
<DT><B>--backup=</B><I>CONTROL</I>

<DD>
(Depuis fileutils-4.1.)
<DT><B>-S </B><I>SUFFIXE</I><B>, --suffix=</B><I>SUFFIXE</I>

<DD>
Ajouter le
<I>SUFFIXE</I>

indiqué à chaque fichier de sauvegarde créé.
Si cette option n'est pas indiquée, on utilisera la valeur de la variable
d'environnement
<B>SIMPLE_BACKUP_SUFFIX</B>.

Si la variable
<B>SIMPLE_BACKUP_SUFFIX</B>

n'existe pas, la valeur par défaut est `~'.
<DT><B>-V </B><I>MÉTHODE</I><B>, --version-control=</B><I>MÉTHODE</I>

<DD>
<DL COMPACT><DT><DD>
Préciser la nomenclature des fichiers de sauvegarde
La
<I>MÉTHODE</I>

indiquée peut être `numbered' (`t'), `existing' (`nil'), ou `never' (`simple').
Si cette option n'est pas indiquée, la valeur de la variable
d'environnement
<B>VERSION_CONTROL</B>

est utilisée, et si la variable
<B>VERSION_CONTROL</B>

n'existe pas, la valeur par défaut est `existing'.
<P>

Cette option correspond à la variable `version-control' sous Emacs.
Les
<I>MÉTHODES</I>

valides (les abréviations non ambiguës sont acceptées) sont&nbsp;:
<DL COMPACT>
<DT><B>t</B>, <B>numbered</B>

<DD>
Toujours faire une sauvegarde numérotée.
<DT><B>nil</B>, <B>existing</B>

<DD>
Faire une sauvegarde numérotée des fichiers en ayant déjà une précédente, et
une sauvegarde simple pour les autres.
<DT><B>never</B>, <B>simple</B>

<DD>
Faire toujours une sauvegarde simple.
</DL>
</DL>

</DL>
<A NAME="lbAI">&nbsp;</A>
<H2>OPTIONS STANDARDS GNU</H2>

<DL COMPACT>
<DT><B>--help</B>

<DD>
Afficher un message d'aide sur la sortie standard, et se terminer correctement.
<DT><B>--version</B>

<DD>
Afficher un numéro de version sur la sortie standard, et se terminer correctement.
<DT><B>--</B>

<DD>
Fin de la liste d'options.
</DL>
<A NAME="lbAJ">&nbsp;</A>
<H2>ENVIRONNEMENT</H2>

Les variables LANG, LC_ALL, LC_CTYPE et LC_MESSAGES
ont leurs significations habituelles.
Pour la version GNU, les variables SIMPLE_BACKUP_SUFFIX et VERSION_CONTROL
configurent la nomenclature adoptée pour les sauvegardes de fichiers.
<A NAME="lbAK">&nbsp;</A>
<H2>CONFORMITÉ</H2>

POSIX 1003.2.
<A NAME="lbAL">&nbsp;</A>
<H2>NOTES</H2>

Cette page décrit
<B>cp</B>

tel qu'on le trouve dans le paquetage fileutils-4.0&nbsp;; d'autres
versions peuvent différer légèrement.
<A NAME="lbAM">&nbsp;</A>
<H2>TRADUCTION</H2>

Christophe Blaess, 1996-2003.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NOM</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">OPTIONS POSIX</A><DD>
<DT><A HREF="#lbAF">Spécificité GNU</A><DD>
<DT><A HREF="#lbAG">OPTIONS GNU</A><DD>
<DT><A HREF="#lbAH">OPTIONS DE SAUVEGARDE GNU</A><DD>
<DT><A HREF="#lbAI">OPTIONS STANDARDS GNU</A><DD>
<DT><A HREF="#lbAJ">ENVIRONNEMENT</A><DD>
<DT><A HREF="#lbAK">CONFORMITÉ</A><DD>
<DT><A HREF="#lbAL">NOTES</A><DD>
<DT><A HREF="#lbAM">TRADUCTION</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 14:54:42 GMT, February 11, 2014
</BODY>
</HTML>
