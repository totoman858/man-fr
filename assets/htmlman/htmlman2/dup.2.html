Content-type: text/html

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of DUP</TITLE>
</HEAD><BODY>
<H1>DUP</H1>
Section: Manuel du programmeur Linux (2)<BR>Updated: 18 juillet 2003<BR><A HREF="#index">Index</A>
<A HREF="/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NOM</H2>

dup, dup2 - Dupliquer un descripteur de fichier.
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<PRE>
<B>#include &lt;<A HREF="file:///usr/include/unistd.h">unistd.h</A>&gt;</B>

<B>int dup(int </B><I>oldfd</I><B>);</B>
<B>int dup2(int </B><I>oldfd</I><B>, int </B><I>newfd</I><B>);</B>
</PRE>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<B>dup</B> et <B>dup2</B>

créent une copie du descripteur de fichier 
<I>oldfd</I>.

<P>
Après un appel réussi à <B>dup</B> ou <B>dup2</B>,
l'ancien et le nouveau descripteurs peuvent être utilisés de manière
interchangeable. Ils partagent les verrous, les pointeurs de position
et les drapeaux. Par exemple si le pointeur de position est modifié en utilisant
<B>lseek</B>

sur l'un des descripteurs, la position est également changée pour l'autre.
<P>
Les deux descripteurs ne partagent toutefois pas le drapeau Close-on-exec.
<P>
<B>dup</B>

utilise le plus petit numéro inutilisé pour le nouveau descripteur.
<P>
<B>dup2</B>

transforme <I>newfd</I> en une copie de <I>oldfd</I>, fermant auparavant <I>newfd</I>

si besoin est.
<A NAME="lbAE">&nbsp;</A>
<H2>VALEUR RENVOYÉE</H2>

<B>dup</B> et <B>dup2</B>

renvoient le nouveau descripteur, ou -1 s'ils échouent, auquel
cas
<I>errno</I>

contient le code d'erreur.
<A NAME="lbAF">&nbsp;</A>
<H2>ERREURS</H2>

<DL COMPACT>
<DT><B>EBADF</B>

<DD>
<I>oldfd</I>

n'est pas un descripteur valide, ou
<I>newfd</I>

n'est pas dans les valeurs autorisées pour un descripteur.
<DT><B>EMFILE</B>

<DD>
Le processus dispose déjà du nombre maximum de descripteurs de fichiers
autorisés simultanément, et tente d'en ouvrir un nouveau.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>ATTENTION</H2>

Les erreurs renvoyées par 
<B>dup2</B>

sont différentes de celles retournées par
<B>fcntl(</B>...,<B>F_DUPFD</B>,...<B>)</B>

si
<I>newfd</I>

n'est pas dans les valeurs autorisées. Sur certains systèmes
<B>dup2</B>

retourne aussi parfois
<B>EINVAL</B>

comme
<B>F_DUPFD</B>.

<A NAME="lbAH">&nbsp;</A>
<H2>BOGUES</H2>

Si
<I>newfd</I>

était ouvert, toutes les erreurs susceptibles d'être rapportées par
<I>close</I>()

sont perdues. Un programmeur soigneux n'utilisera pas
<B>dup2</B>

sans fermer
<I>newfd</I>

d'abord.
<A NAME="lbAI">&nbsp;</A>
<H2>CONFORMITÉ</H2>

SVr4, SVID POSIX, X/OPEN, BSD 4.3. SVr4 documente des conditions d'erreur
supplémentaires EINTR et ENOLINK. POSIX.1 ajoute également EINTR.
<A NAME="lbAJ">&nbsp;</A>
<H2>VOIR AUSSI</H2>

<B><A HREF="/cgi-bin/man/man2html?2+fcntl">fcntl</A></B>(2),

<B><A HREF="/cgi-bin/man/man2html?2+open">open</A></B>(2),

<B><A HREF="/cgi-bin/man/man2html?2+close">close</A></B>(2)

<A NAME="lbAK">&nbsp;</A>
<H2>TRADUCTION</H2>

Christophe Blaess, 1996-2003.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NOM</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">VALEUR RENVOYÉE</A><DD>
<DT><A HREF="#lbAF">ERREURS</A><DD>
<DT><A HREF="#lbAG">ATTENTION</A><DD>
<DT><A HREF="#lbAH">BOGUES</A><DD>
<DT><A HREF="#lbAI">CONFORMITÉ</A><DD>
<DT><A HREF="#lbAJ">VOIR AUSSI</A><DD>
<DT><A HREF="#lbAK">TRADUCTION</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 14:54:51 GMT, February 11, 2014
</BODY>
</HTML>
